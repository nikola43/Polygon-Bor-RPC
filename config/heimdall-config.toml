# Heimdall v2 CometBFT Configuration (Polygon PoS Mainnet)
# Place at: /var/lib/heimdall/config/config.toml
# Based on: packaging/templates/config/mainnet/config.toml

version = "0.38.17"
proxy_app = "tcp://127.0.0.1:26658"
moniker = "polygon-rpc-node"
db_backend = "goleveldb"
log_level = "info"
log_format = "json"
genesis_file = "config/genesis.json"
abci = "socket"

# --- RPC ---
[rpc]
laddr = "tcp://127.0.0.1:26657"
cors_allowed_origins = []
cors_allowed_methods = ["HEAD", "GET", "POST"]
cors_allowed_headers = ["Origin", "Accept", "Content-Type", "X-Requested-With", "X-Server-Time"]
max_open_connections = 900
max_subscription_clients = 100
max_subscriptions_per_client = 5
timeout_broadcast_tx_commit = "10s"

# --- P2P ---
[p2p]
laddr = "tcp://0.0.0.0:26656"

# Official Polygon mainnet Heimdall v2 seeds (12 nodes from docs.polygon.technology, Feb 2026)
seeds = "a0ef6f328949adc077c59ab1f6b03711ae8d32d2@34.185.209.56:26656,f1e632758dfaf616a833900c0b8845bb2547b7c2@34.185.162.14:26656,e49bb5d9cb22943fb2b9f49a4c5d0f773917efaf@34.179.171.228:26656,babb8151d6fae45fcbb9229bd9faba173f3feaf3@35.246.166.189:26656,9c92984a5aad02c43955da94bb0a979a8dadbcfe@34.142.28.190:26656,3643aeae6a5965053709303e97257f62012fdd9c@34.39.56.114:26656,830d44b0d11ab25c9a03135859049d55daf73a03@34.147.169.102:26656,b0e795afc432ea3557b377d7763f6fb6dd102e60@34.105.180.11:26656,be818a0ebc61a8ffefdfaf4d3fcfed72ca2d7188@34.89.255.109:26656,81a5aa40d8bf6782e6f3fb0498406ebe707e576c@34.185.137.160:26656,42b0aa4c784a93c4797ff965d75793e099dc0b11@34.89.119.250:26656,5d532264fe8592bf8c1dc8abfa11ff52b381eb2c@34.89.40.235:26656"

# Persistent peers (12 nodes from docs.polygon.technology, Feb 2026)
persistent_peers = "a0ef6f328949adc077c59ab1f6b03711ae8d32d2@34.185.209.56:26656,f1e632758dfaf616a833900c0b8845bb2547b7c2@34.185.162.14:26656,e49bb5d9cb22943fb2b9f49a4c5d0f773917efaf@34.179.171.228:26656,babb8151d6fae45fcbb9229bd9faba173f3feaf3@35.246.166.189:26656,9c92984a5aad02c43955da94bb0a979a8dadbcfe@34.142.28.190:26656,3643aeae6a5965053709303e97257f62012fdd9c@34.39.56.114:26656,830d44b0d11ab25c9a03135859049d55daf73a03@34.147.169.102:26656,b0e795afc432ea3557b377d7763f6fb6dd102e60@34.105.180.11:26656,be818a0ebc61a8ffefdfaf4d3fcfed72ca2d7188@34.89.255.109:26656,81a5aa40d8bf6782e6f3fb0498406ebe707e576c@34.185.137.160:26656,42b0aa4c784a93c4797ff965d75793e099dc0b11@34.89.119.250:26656,5d532264fe8592bf8c1dc8abfa11ff52b381eb2c@34.89.40.235:26656"

addr_book_strict = true
max_num_inbound_peers = 100
max_num_outbound_peers = 100
pex = true
seed_mode = false
allow_duplicate_ip = false
handshake_timeout = "20s"
dial_timeout = "3s"
send_rate = 5120000
recv_rate = 5120000

# --- Mempool ---
[mempool]
type = "flood"
recheck = true
broadcast = true
size = 5000
max_txs_bytes = 1073741824
max_tx_bytes = 1048576
cache_size = 10000

# --- Consensus ---
[consensus]
timeout_propose = "1s"
timeout_propose_delta = "500ms"
timeout_prevote = "1s"
timeout_prevote_delta = "500ms"
timeout_precommit = "1s"
timeout_precommit_delta = "500ms"
timeout_commit = "500ms"
create_empty_blocks = true

# --- Transaction Index ---
[tx_index]
indexer = "kv"

# --- Instrumentation ---
[instrumentation]
prometheus = true
prometheus_listen_addr = ":26660"
namespace = "cometbft"
